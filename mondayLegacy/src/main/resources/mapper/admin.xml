<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Namespace를 통해 JAVA 클래스와 Annotation클래스와 동기 -->
<mapper namespace="com.ezen.admin">
	<!-- 상품 등록 -->
	<insert id="Insert" parameterType="com.ezen.vo.ProductVO">
		insert into product p(p_name, p_price, p_kind, p_info,  p_img)
		values(
			#{pname}, #{pprice}, #{pkind}, #{pinfo}, #{pimg}
		)
	</insert>
	
	<!-- 상품목록 조회 -->
	<select id="List" resultType="com.ezen.vo.ProductVO">
		select p_no, p_img, p_name, p_price, p_kind, p_wdate, p_display
		from product
		where p_delyn != 'Y'
		order by p_no desc
	</select>
	<!-- 상품목록 조회 카테고리 정렬-->
	<select id="ListK" parameterType="com.ezen.vo.SearchVO" 
		resultType="com.ezen.vo.ProductVO">
		select p_no, p_img, p_name, p_price, p_kind, p_wdate, p_display
		from product
		where p_delyn != 'Y' and
		p_kind = #{pkind}
		order by p_no desc
	</select>
	<!-- 상품목록 조회 진열여부별 정렬 -->
	<select id="ListD" parameterType="com.ezen.vo.SearchVO" 
		resultType="com.ezen.vo.ProductVO">
		select p_no, p_img, p_name, p_price, p_kind, p_wdate, p_display
		from product
		where p_delyn != 'Y' and
		p_display = #{pdisplay}
		order by p_price desc
	</select>
	
	<!-- 상품수정 -->
	<update id="Update" parameterType="com.ezen.vo.ProductVO">
		update set product 
		p_img = #{pimg}, 
		p_name = #{pname}, 
		p_price = #{pprice}, 
		p_kind = #{pkind}, 
		p_display = #{pdisplay}
		where p_no = #{pno} and
		p_delyn != 'Y'
	</update>
	
	<!-- 관리자 로그인 -->
	<select id="AdminLogin" parameterType="com.ezen.vo.UserVO"
		resultType="com.ezen.vo.UserVO">
		select count(*) from user 
		where 
		u_email = #{uemail} and
		u_pw = md5(#{upw})
	</select>
	
	<!-- 주문내역 조회 -->
	<select id="OrderList" resultType="com.ezen.vo.OrdersVO">
		select o_no, 
	</select>
</mapper>
